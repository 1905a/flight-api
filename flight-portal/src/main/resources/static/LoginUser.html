<!DOCTYPE html>
<html lang="en">

<link href="css/bootstrap.min.css" rel="stylesheet"/>
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>


<script src="js/bootbox.min.js"></script>
<script src="js/bootbox.locales.min.js"></script>

<!-- 引入DataTables的css文件 -->
<link href="DataTables/css/jquery.dataTables.min.css" rel="stylesheet" />
<script src="DataTables/js/jquery.dataTables.min.js"></script>

<!-- 引入fileinput文件上传插件的css文件和js文件 -->
<link href="bootstrap-fileinput/css/fileinput.min.css" rel="stylesheet" />
<script src="bootstrap-fileinput/js/fileinput.min.js"></script>
<script src="bootstrap-fileinput/js/locales/zh.js"></script>


<!-- 日期插件 -->
<link href="bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet"/>
<script src="bootstrap-datetimepicker/js/moment-with-locales.js"></script>
<script src="bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>

<!-- 下拉框 -->
<script src="bootstrap-select/js/bootstrap-select.min.js"></script>
<script src="bootstrap-select/js/i18n/defaults-zh_CN.min.js"></script>
<link href="bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet"/>

<!-- 日期格式 -->
<script src="js/date-format.js"></script>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>



<body>

<div class="panel panel-primary">
    <div class="panel-heading">
       用户登录
    </div>
    <div class="panel-body">
        <form class="form-horizontal">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">登陆名:</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="loginName" placeholder="请输入登陆名">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                    </div>
                </div>
                <div class="row">
                <div class="col-md-3">
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">密码:</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="phoneNumber" placeholder="请输入密码">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                    </div>
                    <div class="col-md-3">
                        <button type="button" onclick="Login()" class="btn btn-primary">
                            <span class="glyphicon glyphicon-search"></span>登陆
                        </button>
                        &nbsp;
                        <button type="button" onclick="zhuCe()" class="btn btn-danger">
                            <span class="glyphicon glyphicon-refresh"></span>&nbsp;&nbsp;注册
                        </button>
                    </div>
                    <div class="col-md-3">
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>





</body>

<script>
    function Login(){
        var loginName = $("#loginName").val().trim();
        var password = $("#phoneNumber").val().trim();

        var p = {}
        p.loginName = loginName;
        p.password = password;

        if(loginName != ""){
            if(password != ""){
                $.ajax({
                    url:"http://localhost:8081/LoginController/login",
                    type:"post",
                    dataType:"json",
                    data:p,
                    success:function(result){
                        debugger;
                        if(result.status == 200){
                            alert(11111)
                            localStorage.setItem("token",result.data)
                            location.href="flight.html";
                        }
                    },
                    error:function(){
                        alert("登陆失败，请联系管理员！");
                    }
                });
            }else{
                alert("用户名和密码都不能为空!!")
            }
        }else{
            alert("用户名和密码都不能为空!!")
        }
    }
</script>
</html>